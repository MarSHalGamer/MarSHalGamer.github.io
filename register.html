<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>إنشاء حساب - RP City</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
    body { margin: 0; font-family: 'Cairo', sans-serif; background: radial-gradient(circle at top, #4c1d95, #000000 80%); height: 100vh; display: flex; justify-content: center; align-items: center; color: white; }
    .register-container { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); padding: 40px; border-radius: 20px; border: 1px solid rgba(168, 85, 247, 0.3); width: 100%; max-width: 380px; text-align: center; }
    h2 { color: #a855f7; }
    input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: rgba(0,0,0,0.3); color: white; box-sizing: border-box; outline: none; }
    input:focus { border-color: #a855f7; }
    .submit-btn { width: 100%; padding: 12px; margin-top: 20px; border: none; border-radius: 8px; background: #a855f7; color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }
    .back-home { display: block; margin-top: 20px; color: #aaa; text-decoration: none; font-size: 14px; }
</style>
</head>
<body>

<div class="register-container">
    <h2>إنشاء حساب جديد</h2>
    <form id="regForm">
        <input type="text" id="reg-user" placeholder="اسم المستخدم" required>
        <input type="email" id="reg-email" placeholder="البريد الإلكتروني" required>
        <input type="password" placeholder="كلمة المرور" required>
        <button type="submit" class="submit-btn">تسجيل الحساب</button>
    </form>
    <a href="index.html" class="back-home">← العودة للرئيسية</a>
</div>

<script>
document.getElementById("regForm").onsubmit = function(e) {
    e.preventDefault();
    const user = document.getElementById("reg-user").value;
    const email = document.getElementById("reg-email").value;
    let users = JSON.parse(localStorage.getItem("usersList")) || [];

    if(users.find(u => u.username === user)) {
        alert("⚠️ اسم المستخدم هذا موجود مسبقاً!");
        return;
    }
    if(users.find(u => u.email === email)) {
        alert("⚠️ هذا البريد الإلكتروني مسجل بالفعل!");
        return;
    }

    users.push({username: user, email: email});
    localStorage.setItem("usersList", JSON.stringify(users));
    localStorage.setItem("currentUser", user); // تحويل مباشر
    
    alert("✅ تم التسجيل بنجاح!");
    window.location.href = "index.html";
};
</script>
</body>
</html>
